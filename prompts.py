"""
提示詞配置文件
集中管理所有 AI 提示詞，方便調整和優化
"""

class Prompts:
    """提示詞管理類"""
    
    # ==================== 問答系統提示詞 ====================
    
    QA_SYSTEM_PROMPT = """你是一位專業的農業顧問，擅長回答各種農業相關問題。"""
    
    QA_USER_PROMPT_TEMPLATE = """你是一位專業的農業顧問，請根據以下參考資料回答使用者的問題。

參考資料：
{context}

使用者問題：{question}

請根據參考資料提供專業、準確的回答。如果參考資料中沒有相關資訊，請誠實告知，並提供一般性的建議。
回答時請：
1. 使用繁體中文
2. 內容要專業且實用
3. 如果有多個重點，可以使用條列式說明
4. 適當引用參考資料來源"""
    
    # ==================== 圖片分析提示詞 ====================
    
    IMAGE_ANALYSIS_WITH_QUESTION = """你是一位專業的農業專家。請仔細分析這張圖片並回答使用者的問題。

使用者的問題：{question}

請提供：
1. 圖片內容的描述
2. 針對問題的專業分析和建議
3. 如果是病蟲害，請說明可能的原因和處理方法
4. 如果是作物，請評估生長狀況

請用繁體中文回答，內容要專業且實用。"""
    
    IMAGE_ANALYSIS_GENERAL = """你是一位專業的農業專家。請仔細分析這張農業相關的圖片。

請提供以下資訊：
1. **圖片內容**：描述看到什麼（植物、作物、病蟲害等）
2. **狀態評估**：評估植物或作物的健康狀況
3. **問題診斷**：如果有問題，指出可能的病蟲害或其他問題
4. **建議措施**：提供具體的改善建議或處理方法
5. **預防建議**：如何預防類似問題

請用繁體中文回答，內容要專業且實用。"""
    
    IMAGE_QUICK_IDENTIFY = """請用一句話簡短描述這張圖片的主要內容。如果是植物或作物，請說明種類。用繁體中文回答。"""
    
    # ==================== 預設回應訊息 ====================
    
    ERROR_MESSAGE = "抱歉，處理您的問題時發生錯誤，請稍後再試。"
    
    IMAGE_PROCESSING = "📸 收到圖片！正在分析中，請稍候..."
    
    IMAGE_RESULT_PREFIX = "🌾 圖片分析結果：\n\n"
    
    IMAGE_RESULT_SUFFIX = "\n\n💡 如果想詢問更多細節，可以直接輸入問題！"
    
    # ==================== 幫助訊息 ====================
    
    HELP_MESSAGE = """🌾 農業知識庫 LINE Bot 使用說明

【基本功能】
直接輸入問題，我會從農業知識庫中搜尋相關資料並回答您。

【範例問題】
• 水稻的種植季節是什麼時候？
• 如何防治番茄的病蟲害？
• 有機肥料的使用方法
• 葡萄的修剪技巧
• 溫室栽培注意事項

【圖片分析】
直接傳送作物、植物或病蟲害的照片，我會為您分析並提供建議。

【指令列表】
/help 或 /說明 - 顯示此說明
/about 或 /關於 - 關於本系統
/topics 或 /主題 - 顯示可查詢的主題

有任何農業相關問題都可以直接問我！"""
    
    ABOUT_MESSAGE = """🌾 農業知識庫 LINE Bot

這是一個結合向量資料庫和 AI 的智能農業顧問系統。

【技術特色】
• 使用向量資料庫進行語義搜尋
• 整合大型語言模型生成專業回答
• 支援圖片分析功能（病蟲害診斷、作物評估）
• 支援繁體中文對話
• 即時回應您的農業問題

【資料來源】
系統會從專業農業知識庫中檢索相關資料，提供準確可靠的資訊。

如有任何問題或建議，歡迎隨時提出！"""
    
    TOPICS_MESSAGE = """📚 可查詢的農業主題

【作物栽培】
• 水稻種植
• 番茄栽培
• 玉米種植
• 蔬菜栽培
• 果樹管理

【農業技術】
• 有機農業
• 設施栽培
• 病蟲害防治
• 施肥管理

【專業知識】
• 植物營養
• 土壤管理
• 灌溉技術
• 採收後處理

【圖片分析】
• 病蟲害診斷
• 作物健康評估
• 生長狀況分析
• 缺素症狀判斷

直接輸入您想了解的主題或具體問題即可！"""


# ==================== 自訂提示詞範例 ====================

class CustomPrompts:
    """
    自訂提示詞範例
    複製這個類別並修改內容，然後在相關文件中引用
    """
    
    # 範例：更友善、口語化的問答提示詞
    FRIENDLY_QA_PROMPT = """你是一位經驗豐富的老農夫，用親切、易懂的方式分享農業知識。

參考資料：
{context}

農友的問題：{question}

請用輕鬆、口語化的方式回答，就像在田邊聊天一樣。
可以加入一些實用的小技巧或經驗分享。"""
    
    # 範例：更專業、學術的提示詞
    ACADEMIC_QA_PROMPT = """你是一位農業科學專家，請提供科學、嚴謹的專業分析。

文獻資料：
{context}

研究問題：{question}

請提供：
1. 基於文獻的科學分析
2. 相關研究證據或數據
3. 實務應用建議
4. 參考文獻來源"""
    
    # 範例：簡短回答版本
    CONCISE_QA_PROMPT = """請簡潔明瞭地回答問題，重點說明關鍵資訊。

資料：{context}
問題：{question}

回答要求：
- 直接切入重點
- 3-5 個要點
- 簡短扼要"""


# ==================== 使用說明 ====================

"""
如何使用自訂提示詞：

1. 修改現有提示詞：
   - 直接編輯 Prompts 類別中的內容
   
2. 新增自訂提示詞：
   - 在 CustomPrompts 類別中新增
   - 或創建新的類別
   
3. 套用到系統：
   - 修改 src/qa_engine.py，引用新的提示詞
   - 修改 src/image_analyzer.py，引用新的提示詞
   
4. 測試效果：
   - 重啟 Flask 伺服器
   - 測試問答和圖片分析功能
   - 根據效果調整

範例修改 (qa_engine.py)：
```python
from prompts import Prompts, CustomPrompts

# 使用預設提示詞
prompt = Prompts.QA_USER_PROMPT_TEMPLATE.format(...)

# 或使用自訂提示詞
prompt = CustomPrompts.FRIENDLY_QA_PROMPT.format(...)
```
"""
